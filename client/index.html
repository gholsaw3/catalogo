<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Productos</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
        .producto { background: white; padding: 15px; margin-bottom: 10px; border-radius: 10px; }
        .btn { padding: 10px 20px; background: green; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .btn:hover { background: darkgreen; }
        #total { font-size: 22px; font-weight: bold; margin-top: 20px; }
    </style>
</head>
<body>

    <h1>Catálogo de Productos</h1>
    <div id="lista"></div>

    <button class="btn" onclick="generarCotizacion()">Generar Cotización</button>

    <div id="resultado"></div>

    <script>
        // Cargar productos desde GitHub
        async function cargarProductos() {
            const url = "https://raw.githubusercontent.com/gholsaw3/catalogo/main/data/products.json";
            const res = await fetch(url);
            const data = await res.json();

            const div = document.getElementById("lista");

            data.products.forEach(prod => {
                div.innerHTML += `
                    <div class='producto'>
                        <h3>${prod.nombre}</h3>
                        <p>Precio: $${prod.precio} por ${prod.unidad}</p>
                        <label>Cantidad:</label>
                        <input type="number" id="prod_${prod.id}" min="0" value="0">
                    </div>
                `;
            });
        }

        cargarProductos();

        function generarCotizacion() {
            let total = 0;
            let detalle = "<h2>Cotización</h2>";

            fetch("https://raw.githubusercontent.com/gholsaw3/catalogo/main/data/products.json")
                .then(r => r.json())
                .then(data => {
                    data.products.forEach(prod => {
                        const cantidad = document.getElementById(`prod_${prod.id}`).value;
                        if (cantidad > 0) {
                            const subtotal = cantidad * prod.precio;
                            total += subtotal;
                            detalle += `<p>${prod.nombre}: ${cantidad} × $${prod.precio} = $${subtotal}</p>`;
                        }
                    });

                    detalle += `<h3>Total: $${total}</h3>`;

                    document.getElementById("resultado").innerHTML = detalle;
                });
        }
    </script>

</body>
</html>

